#
# Copyright (C) 2000-2004    jon klein (jklein@spiderland.org)
#
# s pi der la nd
#

BREVEO	= breve.o
BREVEC	= breve.c

BREVECLIO	= breve_cli.o
BREVECLIC	= breve_cli.c

LANGUAGE_FRONTEND_LIBRARY	= -lbrsteve

LIBS 	+=-L../lib @LDFLAGS@ $(LANGUAGE_FRONTEND_LIBRARY) -lbrkernel -lbrsimulation -lbrutil -lbrneural -lbrgraph @EXTRALDFLAGS@ @LIBS@ -lstdc++

INCLUDE	+= -I../include/breve @CPPFLAGS@

all: breve_cli breve

%.o: %.c
	$(CC) $(CFLAGS) $(DEFINES) $(INCLUDE) -c $<

breve: $(BREVEO) ../lib/libbrsimulation.a ../lib/libbrutil.a ../lib/libbrkernel.a ../lib/libbrsteve.a
	$(CC) -o breve $(CFLAGS) $(BREVEO) $(LIBS) -Xlinker -Bdynamic @GLLIBS@ @AUDIOLIBS@
	# strip -s ../lib/loadable-symbols breve
	# strip breve

breve_cli: $(BREVECLIO) ../lib/libbrsimulation.a ../lib/libbrutil.a ../lib/libbrkernel.a ../lib/libbrsteve.a
	$(CC) -o breve_cli $(CFLAGS) $(BREVECLIO) $(LIBS) -Xlinker -Bdynamic @GLLIBS@ @AUDIOLIBS@
	# strip ../lib/loadable-symbols breve_cli
	# strip breve_cli

clean:
	-rm -f breve breve_cli *.o

install: all
